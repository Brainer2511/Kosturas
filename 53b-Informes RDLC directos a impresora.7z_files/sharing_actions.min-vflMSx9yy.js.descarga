define(["require","exports","tslib","modules/clean/sharing/api/client","modules/clean/sharing/notifications","modules/clean/viewer","modules/core/notify","modules/core/i18n","modules/core/uri","modules/clean/browse_interface","modules/clean/referrer_cleansing_redirect","modules/constants/payments","modules/core/exception"],function(e,r,t,o,i,n,s,a,d,_,u,c,l){"use strict";function f(e){i.register_dismiss(e)}function m(e){i.register_mount(e)}function p(){i.upgrade_to_mount()}function g(e,r){if(e.userId){var t=n.Viewer.get_viewer(),i=t.get_user_by_id(e.userId),f=new o.FolderShareApiClient({userId:i.id});s.Notify.info(a._("Adding shared folder ...")),f.mount({contentId:r.nsId,origin:"NOTIFICATION_WEB"}).then(function(e){var r=new d.URI({path:""+_.get_browse_root(i)+e.path_lower,query:{from_scl_sync_modal:"1"}}).toString();u.redirect(String(r))},function(e){if(s.Notify.clear(),e&&e.error&&"insufficient_quota"===e.error[".tag"]){if(i.is_team&&!t.team_is_limited)return void s.Notify.error(a._("Canâ€™t add folder. Your Dropbox account is full."));s.Notify.info(a._("Continue upgrading to add the shared folder to your Dropbox."));var r=i.is_team&&t.team_is_limited,o=r?"/team/upgrade":c.OUT_OF_SPACE_URL,n=new d.URI({scheme:"https",authority:"www.dropbox.com",path:o}),_=r?"sf_aoq_b_n":"wb_oq_shm_tray";n.updateQuery({cont:"sf",oqa:_}),u.redirect(n.toString())}else e&&e.message?s.Notify.error(e.message):s.Notify.error(a._("Failed to add the shared folder."))})}else l.reportStack("notification.userId is missing",{severity:l.SEVERITY.NONCRITICAL,exc_extra:{notification:e}})}Object.defineProperty(r,"__esModule",{value:!0}),o=t.__importStar(o),i=t.__importStar(i),_=t.__importStar(_),u=t.__importStar(u),c=t.__importStar(c),r.registerDismiss=f,r.registerMount=m,r.upgradeToMount=p,r.performBluenoteMountSharedFolder=g});
//# sourceMappingURL=sharing_actions.min.js-vflrCsDhM.map