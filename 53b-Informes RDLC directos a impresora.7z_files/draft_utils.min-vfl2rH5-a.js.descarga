define(["require","exports","draft-js","punycode","immutable"],function(e,t,n,r,o){"use strict";function c(e){return 0===e.getCurrentContent().getPlainText().length}function a(e){return e.getSelection().getHasFocus()}function i(e,t){return n.EditorState.forceSelection(n.EditorState.push(e,t,"insert-fragment"),t.getSelectionAfter())}function u(e,t,r,o,c,a){return n.Modifier.replaceText(e,n.SelectionState.createEmpty(t).merge({anchorOffset:r,focusOffset:o}),c,void 0,a)}function l(e,t,n){for(var r,o,c,a=t.getText();null!==(r=e.exec(a));)o=r.index,c=r[0].length,a=a.substring(o+c),n(o,o+c)}function f(e,r){var o=null,c=null,a=e.start,i=e.end,u=null,l=null,f=0;if(r.getBlockMap().forEach(function(e,n){if(e&&"atomic"!==e.getType()){var r=t.decodeUnicode(e.getText());if(n&&null===o&&a<f+r.length){o=n;var d=a-f;u=t.encodeUnicode(r.slice(0,d)).length}if(n&&null===c&&i<=f+r.length){c=n;var d=i-f;l=t.encodeUnicode(r.slice(0,d)).length}f+=r.length}return o&&c}),!o||!c)throw"Bad range";return n.SelectionState.createEmpty(o).merge({anchorKey:o,anchorOffset:u,focusKey:c,focusOffset:l})}function d(e){return e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function s(e){if("img"===e.tagName.toLowerCase()){var t=e.getAttribute("data-emoji-ch");if(t){var n=document.createElement("span");return n.textContent=t,n}}return e}function g(e){var t=e.style,n=e.tagName.toLowerCase(),r=[];return(parseInt(t.fontWeight||"0")>=600||"bold"===t.fontWeight||"b"===n||"strong"===n)&&(r=r.concat(["BOLD"])),"underline"!==t.textDecoration&&"u"!==n||(r=r.concat(["UNDERLINE"])),"strikethrough"!==t.textDecoration&&"s"!==n&&"strike"!==n||(r=r.concat(["STRIKETHROUGH"])),"italic"!==t.fontStyle&&"i"!==n&&"em"!==n||(r=r.concat(["ITALIC"])),r}function h(e,t,n){if(e.hasAttribute("data-entity-key")&&e.getAttribute("data-editor")===n){var r=e.getAttribute("data-entity-key");try{return t.getEntity(r),r}catch(e){return null}}}function y(e){var t=e.html,r=e.contentState,c=e.editorKey,a=e.elementMappers,i=void 0===a?[]:a,u=document.createElement("body");u.innerHTML=t;var l=[],f=u.textContent||"",d=Array(f.length),s=[0,0],y="",m=function(e){void 0===e&&(e="unstyled");var t=d.slice(s[0],s[1]);l=l.concat([(new n.ContentBlock).merge({type:e,key:n.genKey(),text:y,characterList:o.List(t)})]),y="",s=[s[1],s[1]]},p=function(e){return function(t){switch(t.nodeType){case Node.TEXT_NODE:if(t.textContent){var a=n.CharacterMetadata.create(e),u=t.textContent;y+=u;for(var l=0;l<u.length;l++,s[1]++)d[s[1]]=a}break;case Node.ELEMENT_NODE:var f=i.reduce(function(e,t){return t(e)},t);if(f.childNodes.length){var E=e?e.style.toArray():[],v=e?e.entity:null,x=f.tagName.toLowerCase(),T="true"===f.getAttribute("data-block")||["p","li","blockquote","pre"].concat([1,2,3,4,5,6].map(function(e){return"h"+e})).indexOf(x)!==-1;E=E.concat(g(f)),v=h(f,r,c)||v;var b={style:o.OrderedSet(E)};v&&(b.entity=v),Array.from(f.childNodes).forEach(p(b)),T&&m()}}}};return Array.from(u.childNodes).forEach(p()),0===l.length&&m(),o.OrderedMap(l.map(function(e){return[e.getKey(),e]}))}Object.defineProperty(t,"__esModule",{value:!0}),t.contentIsEmpty=c,t.hasFocus=a,t.replaceContent=i,t.replaceText=u,t.findWithRegex=l,t.locationToSelection=f,t.parseEmail=d,t.decodeUnicode=function(e){return r.ucs2.decode(e)},t.encodeUnicode=function(e){return r.ucs2.encode(e)},t.paperEmojiMapper=s,t.htmlToFragment=y});
//# sourceMappingURL=draft_utils.min.js-vflGn_Y3y.map