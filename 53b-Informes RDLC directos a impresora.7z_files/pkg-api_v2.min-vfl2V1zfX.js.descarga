define("modules/clean/api_v2/client_base",["require","exports","tslib","modules/clean/api_v2/types","modules/clean/api_v2/transport/jquery","modules/clean/devtools/panels/performance/perf_hub_action_types","modules/clean/devtools/panels/performance/perf_hub_actions","modules/constants/debug","modules/constants/request","modules/core/browser","modules/core/cookies","modules/core/uri"],function(e,r,t,n,o,s,i,u,a,c,p,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),u=t.__importStar(u),c=t.__importStar(c);var d=(function(){function e(e){this.transport=e||new o.JQueryAsyncTransport}return e.prototype._upload=function(e,r,o,s){var i=t.__assign((u={},u[n.ApiV2HeaderNames.CsrfToken]=this.csrfToken(),u[n.ApiV2HeaderNames.DropboxApiArg]=JSON.stringify(r),u),this._headers(s));return this.executeRpc(e,i,o,"application/octet-stream");var u},e.prototype._rpc=function(e,r,o){var s=t.__assign((u={},u[n.ApiV2HeaderNames.CsrfToken]=this.csrfToken(),u),this._headers(o)),i=JSON.stringify(r||null);return this.executeRpc(e,s,i,"application/json");var u},e.prototype.csrfToken=function(){return p.Cookies.read("__Host-js_csrf")||""},e.prototype.executeRpc=function(e,r,n,o){return t.__awaiter(this,void 0,void 0,function(){var p,d,f,_,h,m;return t.__generator(this,function(t){switch(t.label){case 0:return p="client-web.dropbox.com"===c.get_hostname()?"client-web.dropbox.com":"www.dropbox.com",u.CPROFILE_ENABLED&&(d={cProfile:u.CPROFILE_PARAMETER,parent_request_id:a.REQUEST_ID}),f=new l.URI({scheme:"https",authority:p,path:"/2/"+e,query:d}),[4,this.transport.executeRpc(f,r,n,o)];case 1:return _=t.sent(),u.CPROFILE_ENABLED&&(h=_.headers[s.PerfHubHeaderNames.SERVER_RESPONSE_TIME]||"-1",m=_.headers[s.PerfHubHeaderNames.REQUEST_PROFILE_ID]||"",i.PerfHubActions.add_ajax_profile(f.getPath(),h,m)),[2,_.result]}})})},e})();r.ApiV2ClientBase=d,d.prototype.ns=function(e){var r=this;return{rpc:function(t,n,o){return r._rpc(e+"/"+t,n,o)},upload:function(t,n,o,s){return r._upload(e+"/"+t,n,o,s)}}}}),define("modules/clean/api_v2/error",["require","exports","tslib","modules/core/html","modules/core/i18n","external/lodash"],function(e,r,t,n,o,s){"use strict";function i(e){return function(r){if(r instanceof u)return e(r);throw r}}Object.defineProperty(r,"__esModule",{value:!0}),s=t.__importStar(s);var u=(function(){function e(e){this.message=e}return e.prototype.toString=function(){return void 0===this.message?"ApiError":"string"==typeof this.message?this.message:this.message.toString()},e.parseResponse=function(r,t,i,u){void 0===u&&(u=null);var a="";null==u&&(u=r in f?f[r]:r>=500?l:e);var c={raw:{status:r,responseBody:i},summary:null,error:{},headers:t};try{var p=JSON.parse(i)||{};c.error=p.error,c.summary=p.error_summary,a=null!=p.user_message?p.user_message.text:""}catch(e){}429!==r||a||(a=o._('Folder updates in progress â€” please try again later.\n<a href="/help/9259" target="_blank" rel="noopener">Learn more</a>'));var d=void 0;return a&&(d=new n.HTML(a)),s.assignIn(new u(d),c)},e})();r.ApiError=u;var a=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.BadRequestError=a;var c=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.AuthError=c;var p=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.AppError=p;var l=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.ServerError=l;var d=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.RateLimitError=d,r.catchApiError=i;var f={400:a,401:c,409:p,429:d}}),define("modules/clean/api_v2/transport/jquery",["require","exports","tslib","jquery","external/lodash","modules/clean/api_v2/error"],function(e,r,t,n,o,s){"use strict";function i(e){var r=e.getAllResponseHeaders(),t={};if(r){var n=r.split("\n").map(function(e){return e.split(": ")});t=o.zipObject(o.map(n,o.first),o.map(n,function(e){return null!=e&&e[1]}))}return t}function u(e,r,t,n){return{result:JSON.parse(n.responseText),headers:i(n)}}function a(e){return s.ApiError.parseResponse(e.status,i(e),e.responseText)}Object.defineProperty(r,"__esModule",{value:!0}),n=t.__importDefault(n),o=t.__importStar(o);var c=(function(){function e(){}return e.prototype.executeRpc=function(e,r,t,o){return new Promise(function(s,i){return n.default.ajax({type:"POST",url:e.toString(),contentType:o,headers:r,data:t}).done(function(r,t,n){return s(u(e,r,t,n))}).fail(function(e){return i(a(e))})})},e})();r.JQueryAsyncTransport=c;var p=(function(){function e(e){if(e<=0)throw new Error("You passed syncTimeout=${syncTimeout}. syncTimeout must be a positive number");this.syncTimeout=e}return e.prototype.executeRpc=function(e,r,t,o){var s=Promise.resolve(null),i=function(r,t,n){s=Promise.resolve(u(e,r,t,n))},c=function(e){s=Promise.reject(a(e))};return n.default.ajax({type:"POST",url:e.toString(),contentType:o,headers:r,data:t,async:!1,timeout:this.syncTimeout,success:i,error:c}),s},e})();r.JQuerySyncTransport=p}),define("modules/clean/api_v2/types",["require","exports","tslib"],function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(function(e){e.DropboxApiArg="Dropbox-API-Arg",e.DropboxApiSelectAdmin="Dropbox-API-Select-Admin",e.DropboxPathRoot="X-Dropbox-Path-Root",e.DropboxUid="X-Dropbox-Uid",e.CsrfToken="X-CSRF-Token"})(r.ApiV2HeaderNames||(r.ApiV2HeaderNames={}));var n=(function(){function e(e,r,t){this.type=e,this.value=r,this.isScalar=t}return e.parse=function(e){var r=e[".tag"];return 2===Object.keys(e).length&&null!=e[r]?new o(r,e[r]):new s(r,e)},e})();r.Union=n;var o=(function(e){function r(r,t){return void 0===t&&(t=null),e.call(this,r,t,!0)||this}return t.__extends(r,e),r.prototype.toJSON=function(){var e={".tag":this.type};return null!=this.value&&(e[this.type]=this.value),e},r})(n);r.UnionScalar=o;var s=(function(e){function r(r,t){return void 0===t&&(t={}),e.call(this,r,t,!1)||this}return t.__extends(r,e),r.prototype.toJSON=function(){return t.__assign({".tag":this.type},this.value)},r})(n);r.UnionStruct=s}),define("modules/clean/api_v2/user_client",["require","exports","tslib","modules/clean/api_v2/types","modules/clean/api_v2/client_base","modules/clean/viewer"],function(e,r,t,n,o,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e){function r(r){return e.call(this,r)||this}return t.__extends(r,e),r.prototype._headers=function(e){var r=s.Viewer.get_viewer().get_user_by_id(e.subjectUserId);return t.__assign((o={},o[n.ApiV2HeaderNames.DropboxUid]=String(r.id),o[n.ApiV2HeaderNames.DropboxPathRoot]=String(r.root_ns_id),o),e.headers);var o},r})(o.ApiV2ClientBase);r.UserApiV2Client=i});
//# sourceMappingURL=pkg-api_v2.min.js-vflx3YxTq.map